<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
  $(function() {
    /****************
    Page IDs of 'Documentation' page unless stated otherwise
    *******************/
    var swdoc = {};
    swdoc[35753255] = {'name':'BUFRDC'};
    swdoc[40804824] = {'name':'ECaccess','alt':'User guide'};
    swdoc[45748339] = {'name':'ecCodes'};
    swdoc[13207146] = {'name':'ecFlow'};
    swdoc[41648799] = {'name':'ECMWF Web API','alt':'need to parse the content on this one....'};
    swdoc[22908294] = {'name':'EMOSLIB','alt':'Using EMOSLIB'};
    swdoc[7373225] = {'name':'GRIB-API'};
    swdoc[14157858] = {'name':'Magics','alt':'Using Magics'};
    swdoc[14157950] = {'name':'Metview'};

    var url = 'https://software.ecmwf.int/wiki/';
    var api_url = url + 'rest/api/content/search?cql=parent=';

    $.each(swdoc, function(parentId,parent) {
      $.getJSON(api_url + parentId, function(data) {
        var html = '<h1>' + parent.name + ' Help</h1>';
        html += '<p class="alt">(from ' + (typeof parent.alt=='undefined' ? 'Documentation' : parent.alt) + ')</p>';
        html += '<p class="nav">back | fwd | home | print | search online documentation |<p>';
        html += '<h2>Topics</h2>';

        $.each(data.results, function(key,child) { //console.log(child);
          html += '<p class="topic"><a href="' + url + child._links.webui + '">' + child.title + '</a></p>';
        });
        
        $('#output').append(html);
      });     
    });
  });
</script>
</head>
<body>
  <div id="output"></div>
</body>
</html>
